{% macro info(user, obj) -%}
<div class="row">
    {% if obj.ruling_faction %}
    <div class="column is-full">
        <div class="panel is-small has-bg-dark-grey">
            <h4 class='has-text-center has-text-dark'>Ruling Faction</h4>
            <div class="row">
                <div class="column is-full">
                    <h5>{{obj.ruling_faction.name}}</h5>
                    <p>
                        {{obj.ruling_faction.backstory_summary}}
                    </p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
    <div class="column is-full">
        <hr>
        <h3 class="has-text-center has-text-dark">Cities</h3>
    </div>
    {% for city in obj.cities %}
    <div class="column is-full">
        <div class="row">
            <div class="column">
                <a href="/{{city.model_name()|lower}}/{{city.pk}}">
                    <div class="image is-medium is-thumbnail is-margin-center">
                        {% if city.image %}
                        <img src="{{city.image.url()}}" alt="{{city.name}}" />
                        {% endif %}
                    </div>
                </a>
                <h4 class="has-text-dark has-text-center">{{city.name}}</h4>
            </div>
            <div class="column is-9">
                <div class="panel has-bg-muted has-text-dark">{{city.backstory_summary | safe}}
                </div>
            </div>
        </div>
        <hr>
    </div>
    {% endfor %}
</div>
{%- endmacro %}

{% macro manage_details(user, obj) -%}
<form hx-post="/api/manage/update"
      hx-swap="none" hx-trigger="input delay:1s, change">
    <h3 class='has-text-center has-text-light'>Ruling Faction</h3>
    <div class="row">
        <div class="column is-full">
            <div class="panel is-small has-bg-light">
                <div class="is-select">
                    <select name='ruling_faction'>
                        <option value=''>=== Select a Faction ===</option>
                        {%for f in obj.factions %}
                        <option value='{{f.pk}}'>{{f.name}}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        {% for faction in obj.factions %}
        <div class="column is-full">
            <div
                 class="panel is-small {% if faction == obj.ruling_faction %} has-bg-primary has-text-primary {%else%} has-bg-secondary has-text-secondary {% endif %}">
                <h5>{{faction.name}}</h5>
                {{faction.backstory_summary}}
            </div>
        </div>
        {% endfor %}
    </div>
</form>
{%- endmacro %}