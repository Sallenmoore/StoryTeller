{% macro info(user, obj) -%}
<div class="row has-space-around">
    {% if obj.owner %}
    <div class="column is-shrink">
        <div class="panel has-bg-primary">
            <h4 class="has-text-secondary">Owner</h4>
            <a href="/{{obj.owner.model_name()|lower}}/{{obj.owner.pk}}">
                <div class="image is-large is-thumbnail is-margin-center">
                    {% if obj.owner.image %}
                    <img src="{{obj.owner.image.url()}}" alt="{{obj.owner.name}}" />
                    {% endif %}
                </div>
                <h4 class="has-text-light">
                    {{obj.owner.name}}
                </h4>
            </a>
        </div>
    </div>
    {% endif %}
    <div class="column is-shrink">
        <h4>Inventory</h4>
        <ul>
            {%for i in obj.inventory %}
            <li class="has-bg-light">{{i}}</li>
            {% endfor%}
        </ul>
    </div>
</div>
{%- endmacro %}

{% macro manage_details(user, obj) -%}
<div class="row has-space-around">
    <div class="column is-half">
        <h4>Owner</h4>
        <div class="row has-space-around" id='owner-manager-container'>
            <div class="column is-full search">
                <div class="has-dropdown" style="width: 100%;">
                    <input class="has-bg-light" autocomplete=off type="search" name="query"
                           placeholder="Search to Add Owner..."
                           style="border-bottom: solid #000;" hx-target="#owner-search"
                           hx-post="/api/manage/owner/add/search"
                           hx-trigger="input delay:750ms, search"
                           hx-on:input="this.value.length < 1 ? this.closest('.has-dropdown').classList.remove('is-active'):this.closest('.has-dropdown').classList.add('is-active')">
                    <ul class="dropdown autocomplete-list has-bg-light" id="owner-search">
                    </ul>
                </div>
            </div>
            {% if obj.owner %}
            <div class="column is-half">
                <div class="panel has-bg-primary">
                    <h4 class="has-text-secondary">Owner</h4>
                    <a href="/{{obj.owner.model_name()|lower}}/{{obj.owner.pk}}">
                        <div class="image is-large is-thumbnail is-margin-center">
                            {% if obj.owner.image %}
                            <img src="{{obj.owner.image.url()}}" alt="{{obj.owner.name}}" />
                            {% endif %}
                        </div>
                        <h4 class="has-text-light">
                            {{obj.owner.name}}
                        </h4>
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    <div class="column is-half">
        <form hx-post="/api/manage/update"
              hx-swap="none" hx-trigger="input delay:1s, change">
            <h4>Inventory</h4>
            {%for i in obj.inventory %}
            <input class="has-bg-light" type="text" name="inventory[]" value='{{i}}'>
            {% endfor%}
        </form>
    </div>
</div>
{%- endmacro %}

{% macro owner_dropdown(user, obj, objs=[]) -%}
{% for o in objs %}
<li class="dropdown__link">
    <a hx-post='/api/manage/{{obj.path}}/owner/add/{{o.path}}'
       hx-target='#page-container'
       hx-indicator='#request-indicator'>
        <div class="row">
            <div class="column is-shrink">
                <div class="image is-tiny is-thumbnail" style="cursor: pointer">
                    {% if o.image %}
                    <img src="{{o.image.url(size=50)}}" alt="{{o.name}}" />
                    {% endif %}
                </div>
            </div>
            <div class="column">
                {{o.name}}
            </div>
        </div>
    </a>
</li>
{% endfor %}
{%- endmacro%}