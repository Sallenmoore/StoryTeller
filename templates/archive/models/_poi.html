{% macro info(user, obj) -%}
<div class="row">
    <div class="column is-shrink is-vertically-centered">
        <h3 class="has-text-dark">{{obj.title}} Type:</h3>
    </div>
    <div class="column is-shrink is-vertically-centered ">
        <h4 class="has-text-dark-grey">{{obj.location_type}}</h4>
    </div>
    {% if obj.owner %}
    <div class="column">
        <div class="panel has-bg-primary">
            <h4 class="has-text-dark">Owner</h4>
            <a href="/{{obj.owner.model_name()|lower}}/{{obj.owner.pk}}">
                <div class="image is-large is-thumbnail is-margin-center">
                    {% if obj.owner.image %}
                    <img src="{{obj.owner.image.url()}}" alt="{{obj.owner.name}}" />
                    {% endif %}
                </div>
                <h4 class="has-text-dark">
                    {{obj.owner.name}}
                </h4>
            </a>
        </div>
    </div>
    {% endif %}
</div>
<div class="row">
    {% for character in obj.characters %}
    <hr>
    <div class="column is-full">
        <div class="row">
            <div class="column is-shrink">
                <a href="/{{character.path}}">
                    <div class="image is-medium is-thumbnail is-margin-center">
                        {% if character.image %}
                        <img src="{{character.image.url()}}" alt="{{character.name}}" />
                        {% endif %}
                    </div>
                </a>
            </div>
            <div class="column is-shrink">
                <h4 class="has-text-secondary">{{character.name}}</h4>
            </div>
            <div class="column">
                <p>{{character.backstory_summary | safe}}</p>
            </div>
        </div>
        <hr>
    </div>
    {% endfor %}
</div>
{%- endmacro %}

{% macro manage_details(user, obj) -%}
<form hx-post="/api/manage/update"
      hx-swap="none" hx-trigger="input delay:1s, change">
    <div class="row">
        <div class="column">
            <h4 for="name">POI Type</h4>
            <input list="location_list" class="has-bg-light" type="text" id='location_type'
                   name="location_type" value='{{obj.location_type}}'>
            <datalist id="location_list">
                {% for ltype in obj.categories %}
                <option value="{{ltype}}" {% if obj.location_type==ltype %} selected {% endif %}>
                    {{ltype}}
                </option>
                {% endfor %}
            </datalist>
        </div>
    </div>
    <div class="column is-shrink">
        <h4>Owner</h4>
        <input class="has-bg-light" disabled id='owner' type="text" name="owner" value='TBD...'>
    </div>
</form>
<div class="row has-space-around">
    <div class="column is-shrink">
        <a href="/location/{{obj.pk}}/frompoi" class="button">Convert to Location</a>
    </div>
</div>
{%- endmacro %}