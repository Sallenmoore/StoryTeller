{% import "shared/_icons.html" as icon_components %}
{% import "shared/_manage.html" as manage_components %}

{% macro manage(user, obj) -%}
{{manage_components.manage(user, obj)}}
{{manage_components.dates(user, obj)}}
<form hx-post="/manage/update"
      hx-swap="none" hx-trigger="input delay:1s, change">
    <div class="grid-x">
        <div class="cell">
            <h3>Location Type</h3>
            <input list="location_list" type="text" id='location_type'
                   name="location_type" value='{{obj.location_type}}'>
            <datalist id="location_list">
                {% for ltype in obj.categories %}
                <option value="{{ltype}}" {% if obj.location_type==ltype %} selected {% endif %}>
                    {{ltype}}
                </option>
                {% endfor %}
            </datalist>
        </div>
        <div class="cell shrink">
            <label>Owner
                <select name="owner">
                    <option value="">===Select Owner===</option>
                    {% for ch in obj.characters + obj.creatures + obj.factions %}
                    <option value="{{ch.pk}}" {% if obj.owner==ch %} selected {% endif %}>
                        {{ch.name}}
                    </option>
                    {% endfor %}
                </select>
            </label>
        </div>
    </div>
</form>
{{manage_components.backstory(user, obj)}}
{{manage_components.image(user, obj)}}
{%- endmacro %}